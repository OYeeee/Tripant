<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<link th:href="@{/css/diary/diary_aside.css}" rel="stylesheet" type="text/css">
<link th:href="@{/css/mydiary/mydiary_board.css}" rel="stylesheet">
<head th:replace="~{common/header :: head('diaryboard')}"></head>
<script type="text/javascript">
//JavaScript 코드 추가
document.addEventListener("DOMContentLoaded", function() {
	var diaries =8; /* 일기 데이터 배열 */
	
	var batchSize = 8; //한번에 보여줄 일기의 개수
	var currentIndex = 0; // 현재 보여지고 있는 일기의 인덱스
	
	//일기를 렌더링 하는 함수
	function renderDiaries(startIndex, count){
		var boardList = document.querySelector(".board-list");
		for (var i = startIndex; i < startIndex + count; i++) {
            var diary = diaries[i];
            if (diary) {
                var diaryElement = document.createElement("div");
                diaryElement.classList.add("wrap-diary");
                diaryElement.innerHTML = `
                    <div class="diary-img">
                        <img src="https://dummyimage.com/200x200/000/fff" alt="대표 이미지">
                    </div>
                    <div class="wrap-content">
                        <div class="diary-content">
                            <p class="diary-title">${diary.diaryTitle}</p>
                            <p class="diary-date">${diary.diaryDate}</p>
                            <p class="diary-open">${diary.diaryOpen}</p>
                        </div>
                    </div>
                `;
                boardList.appendChild(diaryElement);
            }
        }
    }

    // 더보기 버튼 클릭 이벤트 핸들러
    document.querySelector(".btn-more .learn-more").addEventListener("click", function() {
        renderDiaries(currentIndex, batchSize); // batchSize만큼 일기를 추가로 렌더링
        currentIndex += batchSize; // currentIndex 업데이트
    });

    // 초기에 일기 렌더링
    renderDiaries(currentIndex, batchSize);
    currentIndex += batchSize; // 초기 인덱스 설정
});


</script>
</head>
<body>
	<header>
		<div class="header" th:insert="~{common/header :: wrap-header}"></div>
	</header>
	<section>
		<div class="mydiary-wrap">
			<!-- 사이드바 연결 -->
			<aside th:insert="~{diary/diary_aside :: wrap-diary-aside}"></aside>
			<!-- 나만의 글 가져오기   -->
			<div class="board-list">
				<!-- <th:block th:if="${diaries} != null">
					<th:block th:each="diary :  ${diaries}">
						<div class="wrap-diary">
							<div class="diary-img">
								<img src="https://dummyimage.com/200x200/000/fff" alt="대표 이미지">
							</div>
							<div class="wrap-content">
								<div class="diary-content">
									<p class="diary-title" th:text="${diary.diaryTitle}"></p>
									<p class="diary-date" th:text="${diary.diaryDate}"></p>
									<p class="diary-open" th:text="${diary.diaryOpen}"></p>
								</div>
							</div>
						</div>
					</th:block>
				</th:block> -->
				<!-- 4x4 로 뿌리기 -->
				
				
				<!-- db 연동 전 데모글  -->
				<div class="wrap-diary">
							<div class="diary-img">
								<img src="https://dummyimage.com/200x200/000/fff" alt="대표 이미지">
							</div>
							<div class="wrap-content">
								<div class="diary-content">
									<p class="diary-title">제목</p>
									<p class="diary-date" >yy-mm-dd</p>
									<p class="diary-open" >비공개</p>
								</div>
							</div>
						</div>
				<div class="wrap-diary">
							<div class="diary-img">
								<img src="https://dummyimage.com/200x200/000/fff" alt="대표 이미지">
							</div>
							<div class="wrap-content">
								<div class="diary-content">
									<p class="diary-title">제목</p>
									<p class="diary-date" >yy-mm-dd</p>
									<p class="diary-open" >비공개</p>
								</div>
							</div>
						</div>
				<div class="wrap-diary">
							<div class="diary-img">
								<img src="https://dummyimage.com/200x200/000/fff" alt="대표 이미지">
							</div>
							<div class="wrap-content">
								<div class="diary-content">
									<p class="diary-title">제목</p>
									<p class="diary-date" >yy-mm-dd</p>
									<p class="diary-open" >비공개</p>
								</div>
							</div>
						</div>
				<div class="wrap-diary">
							<div class="diary-img">
								<img src="https://dummyimage.com/200x200/000/fff" alt="대표 이미지">
							</div>
							<div class="wrap-content">
								<div class="diary-content">
									<p class="diary-title">제목</p>
									<p class="diary-date" >yy-mm-dd</p>
									<p class="diary-open" >비공개</p>
								</div>
							</div>
						</div>
				<div class="wrap-diary">
							<div class="diary-img">
								<img src="https://dummyimage.com/200x200/000/fff" alt="대표 이미지">
							</div>
							<div class="wrap-content">
								<div class="diary-content">
									<p class="diary-title">제목</p>
									<p class="diary-date" >yy-mm-dd</p>
									<p class="diary-open" >비공개</p>
								</div>
							</div>
						</div>
				<div class="wrap-diary">
							<div class="diary-img">
								<img src="https://dummyimage.com/200x200/000/fff" alt="대표 이미지">
							</div>
							<div class="wrap-content">
								<div class="diary-content">
									<p class="diary-title">제목</p>
									<p class="diary-date" >yy-mm-dd</p>
									<p class="diary-open" >비공개</p>
								</div>
							</div>
						</div>
				<div class="wrap-diary">
							<div class="diary-img">
								<img src="https://dummyimage.com/200x200/000/fff" alt="대표 이미지">
							</div>
							<div class="wrap-content">
								<div class="diary-content">
									<p class="diary-title">제목</p>
									<p class="diary-date" >yy-mm-dd</p>
									<p class="diary-open" >비공개</p>
								</div>
							</div>
						</div>
				<div class="wrap-diary">
							<div class="diary-img">
								<img src="https://dummyimage.com/200x200/000/fff" alt="대표 이미지">
							</div>
							<div class="wrap-content">
								<div class="diary-content">
									<p class="diary-title">제목</p>
									<p class="diary-date" >yy-mm-dd</p>
									<p class="diary-open" >비공개</p>
								</div>
							</div>
						</div>
				<!-- 더미 글 끝 -->
				
				
			</div>

			<div class="btn-more">
				<button type="button" class="learn-more">더보기</button>
			</div>
		</div>
	</section>
	<!-- <aside> <div class="aside" th:insert="~{common/diary_aside :: wrap-aside}"></div></aside> -->
	<footer>
		<div class="footer" th:insert="~{common/footer :: wrap-footer}"></div>
	</footer>
</body>
</html>